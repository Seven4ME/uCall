<html>
<head>
    <link rel="stylesheet" href="/ui/vendors/ext-4.0.1/resources/css/ext-all.css">
    <link rel="stylesheet" href="/ui/resources/css/style.css" />

    <script type="text/javascript" src="/ui/vendors/ext-4.0.1/ext-all-debug.js"></script>
    <script src="http://172.22.90.132/router/api/"></script>

    <script>


        Ext.require([
            'Ext.direct.*',
            'Ext.form.*',
            'Ext.tip.QuickTipManager',
            'Ext.layout.container.Accordion'
        ]);

 /*       Ext.ns("Ext.app");
        Ext.app.REMOTING_API =
            {
                "url":"php\/router.php",
                "type":"remoting",
                "actions":{
                    "Profile":[
                        {"name":"getBasicInfo","len":2},
                        {"name":"updateBasicInfo","len":0,"formHandler":true}
                    ]
                }
            };*/


        Ext.onReady(function(){
        /*    Ext.app.REMOTING_API.enableBuffer = 100;
            Ext.direct.Manager.addProvider(Ext.app.REMOTING_API); */

            // provide feedback for any errors
            Ext.tip.QuickTipManager.init();

            var basicInfo = Ext.create('Ext.form.Panel', {
                // configs for FormPanel
                title: 'Basic Information',
                border: false,
                bodyPadding: 10,
                // configs for BasicForm
                api: {
                    // The server-side method to call for load() requests
                    load: Profile.getBasicInfo,
                    // The server-side must mark the submit handler as a 'formHandler'
                    submit: Profile.updateBasicInfo
                },
                // specify the order for the passed params
                paramOrder: ['id', 'email'],
                dockedItems: [{
                    dock: 'bottom',
                    xtype: 'toolbar',
                    ui: 'footer',
                    style: 'margin: 0 5px 5px 0;',
                    items: ['->', {
                        text: 'Submit',
                        handler: function(){
                            basicInfo.getForm().submit({
                                params: {
                                    foo: 'bar',
                                    uid: 34
                                }
                            });
                        }
                    }]
                }],
                defaultType: 'textfield',
                defaults: {
                    anchor: '100%'
                },
                items: [{
                    fieldLabel: 'Name',
                    name: 'name'
                },{
                    fieldLabel: 'Email',
                    msgTarget: 'side',
                    name: 'email'
                },{
                    fieldLabel: 'Company',
                    name: 'company'
                }]
            });

             var accordion = Ext.create('Ext.panel.Panel', {
                layout: 'accordion',
                renderTo: Ext.getBody(),
                title: 'My Profile',
                width: 300,
                height: 240,
                items: [basicInfo]
             });

            basicInfo.getForm().load({
                // pass 2 arguments to server side getBasicInfo method (len=2)
                params: {
                    email: 'mail@mail.ua',
                    id: 34
                }
            });






        });

    </script>
</head>
<body>

</body>
</html>
